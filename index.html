<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imperio Infernal - Calculadora de Tributos</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.4);
        }
        body {
            background-color: #000;
        }
    </style>
</head>
<body>
    
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect } from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        // Importamos los √≠conos espec√≠ficos que usaste en tu c√≥digo
        import { Users, Plus, Trash2, Flame, Cloud, X, Calendar, DollarSign, Edit3, CheckCircle2 } from 'https://esm.sh/lucide-react@0.263.1';

        // --- INICIO DE TU C√ìDIGO REACT (Copiado y adaptado) ---

        // --- COMPONENTE MODAL DE CARGA INTELIGENTE ---
        const EntryModal = ({ isOpen, onClose, onSave, theme, title, existingEntries = [] }) => {
            const [selectedMonth, setSelectedMonth] = useState(new Date().getMonth());
            const [periodType, setPeriodType] = useState('week'); // 'week' or 'month'
            const [weekNumber, setWeekNumber] = useState(1);
            const [inputMode, setInputMode] = useState('daily'); // 'daily' or 'total'
            
            // Estado para saber si estamos editando
            const [editingId, setEditingId] = useState(null);

            // Estados de valores
            const [dailyValues, setDailyValues] = useState({
                Lunes: '', Martes: '', Mi√©rcoles: '', Jueves: '', Viernes: '', S√°bado: '', Domingo: ''
            });
            const [totalValue, setTotalValue] = useState('');

            const months = [
                'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
            ];

            // Efecto para detectar si el periodo seleccionado ya existe
            useEffect(() => {
                if (!isOpen) return;

                const monthName = months[selectedMonth];
                let targetLabel = '';
                
                if (periodType === 'month') {
                targetLabel = `Mes Completo: ${monthName}`;
                } else {
                targetLabel = `${monthName} - Semana ${weekNumber}`;
                }

                // Buscar si existe una entrada con este label
                const foundEntry = existingEntries.find(e => e.label === targetLabel);

                if (foundEntry) {
                // MODO EDICI√ìN: Cargar datos existentes
                setEditingId(foundEntry.id);
                if (foundEntry.details) {
                    setInputMode('daily');
                    setDailyValues(foundEntry.details);
                    setTotalValue('');
                } else {
                    setInputMode('total');
                    setTotalValue(foundEntry.amount);
                    setDailyValues({ Lunes: '', Martes: '', Mi√©rcoles: '', Jueves: '', Viernes: '', S√°bado: '', Domingo: '' });
                }
                } else {
                // MODO NUEVO: Limpiar
                setEditingId(null);
                setDailyValues({ Lunes: '', Martes: '', Mi√©rcoles: '', Jueves: '', Viernes: '', S√°bado: '', Domingo: '' });
                setTotalValue('');
                }
            }, [selectedMonth, periodType, weekNumber, isOpen, existingEntries]);

            if (!isOpen) return null;

            // Calcular total actual
            const calculateCurrentTotal = () => {
                if (inputMode === 'total') {
                return parseFloat(totalValue) || 0;
                }
                return Object.values(dailyValues).reduce((acc, val) => acc + (parseFloat(val) || 0), 0);
            };

            const handleSave = () => {
                const amount = calculateCurrentTotal();
                if (amount > 0) {
                const monthName = months[selectedMonth];
                let label = '';
                if (periodType === 'month') {
                    label = `Mes Completo: ${monthName}`;
                } else {
                    label = `${monthName} - Semana ${weekNumber}`;
                }

                // Enviamos editingId para saber si es update o create
                onSave({ 
                    id: editingId || Date.now(), // Si editamos, mantenemos ID, si no, nuevo ID
                    amount, 
                    label, 
                    details: inputMode === 'daily' ? dailyValues : null 
                }, !!editingId); // Flag indicando si fue edici√≥n
                
                onClose();
                }
            };

            // Helper para ver si una opci√≥n est√° ya cargada (para UI del select)
            const isPeriodLoaded = (pType, pNum) => {
                const mName = months[selectedMonth];
                const lbl = pType === 'month' ? `Mes Completo: ${mName}` : `${mName} - Semana ${pNum}`;
                return existingEntries.some(e => e.label === lbl);
            };

            // Estilos
            const isBoss = theme === 'boss';
            const bgClass = isBoss ? 'bg-slate-900 border-red-800 text-red-100' : 'bg-white border-sky-200 text-slate-800';
            const headerClass = isBoss ? 'text-orange-500' : 'text-sky-600';
            const buttonClass = isBoss ? 'bg-orange-700 hover:bg-orange-600 text-white' : 'bg-sky-600 hover:bg-sky-500 text-white';
            const inputClass = isBoss 
                ? 'bg-red-950/50 border-red-800 text-red-100 focus:border-orange-500' 
                : 'bg-white border-sky-200 text-slate-700 focus:border-sky-500';

            return React.createElement("div", { className: "fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm" },
                React.createElement("div", { className: `w-full max-w-lg rounded-2xl border-2 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] ${bgClass}` },
                    // Header Modal
                    React.createElement("div", { className: `p-4 border-b flex justify-between items-center ${isBoss ? 'border-red-900 bg-red-950/30' : 'border-sky-100 bg-sky-50'}` },
                        React.createElement("div", { className: "flex flex-col" },
                            React.createElement("h3", { className: `text-xl font-bold flex items-center gap-2 ${headerClass}` },
                                isBoss ? React.createElement(Flame, { className: "w-5 h-5" }) : React.createElement(Cloud, { className: "w-5 h-5" }),
                                editingId ? 'Editar Carga Existente' : title
                            ),
                            editingId && React.createElement("span", { className: "text-xs opacity-70 flex items-center gap-1" }, React.createElement(Edit3, { className: "w-3 h-3" }), " Modificando datos ya guardados")
                        ),
                        React.createElement("button", { onClick: onClose, className: "p-1 rounded-full hover:bg-black/10 transition-colors" },
                            React.createElement(X, { className: "w-6 h-6 opacity-60" })
                        )
                    ),
                    // Body
                    React.createElement("div", { className: "p-6 overflow-y-auto custom-scrollbar flex-1" },
                        // Selecci√≥n de Periodo
                        React.createElement("div", { className: "grid grid-cols-2 gap-4 mb-6" },
                            React.createElement("div", null,
                                React.createElement("label", { className: "block text-xs font-bold uppercase opacity-70 mb-1" }, "Mes"),
                                React.createElement("select", {
                                    value: selectedMonth,
                                    onChange: (e) => setSelectedMonth(Number(e.target.value)),
                                    className: `w-full p-2 rounded border outline-none ${inputClass}`
                                }, months.map((m, i) => React.createElement("option", { key: i, value: i }, m)))
                            ),
                            React.createElement("div", null,
                                React.createElement("label", { className: "block text-xs font-bold uppercase opacity-70 mb-1" }, "Periodo"),
                                React.createElement("div", { className: "flex flex-col gap-2" },
                                    React.createElement("div", { className: "flex gap-2" },
                                        React.createElement("select", {
                                            value: periodType,
                                            onChange: (e) => setPeriodType(e.target.value),
                                            className: `flex-1 p-2 rounded border outline-none ${inputClass}`
                                        },
                                            React.createElement("option", { value: "week" }, "Semana"),
                                            React.createElement("option", { value: "month" }, "Mes Entero")
                                        ),
                                        periodType === 'week' && React.createElement("select", {
                                            value: weekNumber,
                                            onChange: (e) => setWeekNumber(Number(e.target.value)),
                                            className: `w-20 p-2 rounded border outline-none ${inputClass}`
                                        }, [1, 2, 3, 4, 5].map(n => React.createElement("option", { key: n, value: n }, `${n} ${isPeriodLoaded('week', n) ? '‚úì' : ''}`)))
                                    ),
                                    editingId ? 
                                        React.createElement("span", { className: "text-xs text-green-500 font-bold flex items-center gap-1" }, React.createElement(CheckCircle2, { className: "w-3 h-3" }), " Periodo ya cargado (Editando)") :
                                        React.createElement("span", { className: "text-xs opacity-50" }, "Periodo nuevo disponible")
                                )
                            )
                        ),
                        // Selector de Modo
                        React.createElement("div", { className: "flex gap-2 mb-6 p-1 bg-black/10 rounded-lg" },
                            React.createElement("button", {
                                onClick: () => setInputMode('daily'),
                                className: `flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition-all ${inputMode === 'daily' ? (isBoss ? 'bg-orange-600 text-white shadow' : 'bg-sky-500 text-white shadow') : 'opacity-60 hover:opacity-100'}`
                            }, "D√≠a por D√≠a"),
                            React.createElement("button", {
                                onClick: () => setInputMode('total'),
                                className: `flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition-all ${inputMode === 'total' ? (isBoss ? 'bg-orange-600 text-white shadow' : 'bg-sky-500 text-white shadow') : 'opacity-60 hover:opacity-100'}`
                            }, "Total Directo")
                        ),
                        // Inputs
                        inputMode === 'total' ? React.createElement("div", { className: "mb-6" },
                            React.createElement("label", { className: "block text-sm font-bold opacity-80 mb-2" }, "Monto Total"),
                            React.createElement("div", { className: "relative" },
                                React.createElement("span", { className: "absolute left-3 top-1/2 -translate-y-1/2 opacity-50 font-bold text-lg" }, "$"),
                                React.createElement("input", {
                                    type: "number",
                                    value: totalValue,
                                    onChange: (e) => setTotalValue(e.target.value),
                                    className: `w-full pl-8 pr-4 py-3 text-xl font-bold rounded-lg border outline-none ${inputClass}`,
                                    placeholder: "0",
                                    autoFocus: true
                                })
                            )
                        ) : React.createElement("div", { className: "grid grid-cols-2 gap-3 mb-6" },
                            Object.keys(dailyValues).map((day) => React.createElement("div", { key: day, className: day === 'Domingo' ? 'col-span-2' : '' },
                                React.createElement("label", { className: "block text-xs font-bold opacity-60 mb-1" }, day),
                                React.createElement("div", { className: "relative" },
                                    React.createElement("span", { className: "absolute left-2 top-1/2 -translate-y-1/2 opacity-50 text-xs" }, "$"),
                                    React.createElement("input", {
                                        type: "number",
                                        value: dailyValues[day],
                                        onChange: (e) => setDailyValues({...dailyValues, [day]: e.target.value}),
                                        className: `w-full pl-5 pr-2 py-1.5 text-sm rounded border outline-none ${inputClass}`,
                                        placeholder: "0"
                                    })
                                )
                            ))
                        ),
                        // Resumen Total
                        React.createElement("div", { className: `p-4 rounded-xl flex justify-between items-center ${isBoss ? 'bg-orange-900/20 border border-orange-900/50' : 'bg-sky-50 border border-sky-100'}` },
                            React.createElement("span", { className: "text-sm font-medium opacity-80" }, "Total Calculado:"),
                            React.createElement("span", { className: `text-xl md:text-2xl font-black ${isBoss ? 'text-orange-500' : 'text-sky-600'} break-all` },
                                `$${new Intl.NumberFormat('es-AR').format(calculateCurrentTotal())}`
                            )
                        )
                    ),
                    // Footer Actions
                    React.createElement("div", { className: `p-4 border-t flex gap-3 ${isBoss ? 'border-red-900 bg-black/20' : 'border-slate-100 bg-slate-50'}` },
                        React.createElement("button", { onClick: onClose, className: "flex-1 py-2.5 rounded-lg font-bold border border-transparent hover:bg-black/5 opacity-70 hover:opacity-100 transition-colors" }, "Cancelar"),
                        React.createElement("button", {
                            onClick: handleSave,
                            disabled: calculateCurrentTotal() <= 0,
                            className: `flex-[2] py-2.5 rounded-lg font-bold shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed ${buttonClass}`
                        }, editingId ? 'Guardar Cambios' : 'Confirmar Carga')
                    )
                )
            );
        };

        // --- APP PRINCIPAL ---
        const EarningsCalculator = () => {
            const [bossEntries, setBossEntries] = useState([]);
            const [employees, setEmployees] = useState([]);
            const [activeModal, setActiveModal] = useState(null);

            // Formateador de moneda optimizado para millones
            const formatMoney = (amount) => {
                return new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', maximumFractionDigits: 0 }).format(amount);
            };

            // --- C√ÅLCULOS ---
            const bossTotalGenerated = bossEntries.reduce((acc, entry) => acc + entry.amount, 0);

            const totalFromEmployees = employees.reduce((acc, emp) => {
                const totalGenerated = emp.entries.reduce((sum, entry) => sum + entry.amount, 0);
                const bossShare = totalGenerated * ((100 - emp.retentionPercent) / 100);
                return acc + bossShare;
            }, 0);

            const totalBossEarnings = bossTotalGenerated + totalFromEmployees;

            // --- FUNCIONES DE GESTI√ìN ---

            // Guardar datos JEFE (Nuevo o Actualizaci√≥n)
            const handleBossSave = (entryData, isUpdate) => {
                if (isUpdate) {
                    setBossEntries(bossEntries.map(e => e.id === entryData.id ? entryData : e));
                } else {
                    setBossEntries([entryData, ...bossEntries]);
                }
            };

            const removeBossEntry = (entryId) => {
                setBossEntries(bossEntries.filter(entry => entry.id !== entryId));
            };

            // Gesti√≥n de Empleados
            const addEmployee = () => {
                const newId = employees.length > 0 ? Math.max(...employees.map(e => e.id)) + 1 : 1;
                setEmployees([...employees, { 
                id: newId, 
                name: `√Ångel Trabajador ${newId}`, 
                entries: [], 
                retentionPercent: 55, 
                isWife: false 
                }]);
            };

            const removeEmployee = (id) => {
                setEmployees(employees.filter(e => e.id !== id));
            };

            const updateEmployee = (id, field, value) => {
                setEmployees(employees.map(e => {
                if (e.id === id) {
                    if (field === 'isWife') {
                        return { ...e, isWife: value, retentionPercent: value ? 0 : 55 };
                    }
                    return { ...e, [field]: value };
                }
                return e;
                }));
            };

            // Guardar datos EMPLEADO (Nuevo o Actualizaci√≥n)
            const handleEmployeeSave = (empId, entryData, isUpdate) => {
                setEmployees(employees.map(emp => {
                if (emp.id === empId) {
                    let newEntries;
                    if (isUpdate) {
                        newEntries = emp.entries.map(e => e.id === entryData.id ? entryData : e);
                    } else {
                        newEntries = [entryData, ...emp.entries];
                    }
                    return { ...emp, entries: newEntries };
                }
                return emp;
                }));
            };

            const removeEmployeeEntry = (empId, entryId) => {
                setEmployees(employees.map(emp => {
                if (emp.id === empId) {
                    return { ...emp, entries: emp.entries.filter(entry => entry.id !== entryId) };
                }
                return emp;
                }));
            };

            // Helper para obtener entradas actuales para el modal
            const getActiveEntries = () => {
                if (!activeModal) return [];
                if (activeModal.type === 'boss') return bossEntries;
                const emp = employees.find(e => e.id === activeModal.id);
                return emp ? emp.entries : [];
            };

            // Dado que no usamos un compilador JSX en tiempo de ejecuci√≥n para evitar errores,
            // Convertimos la estructura principal a React.createElement
            // NOTA: Para mantener el c√≥digo limpio en esta vista, usar√© una mezcla h√≠brida.
            // Si el c√≥digo de abajo fuera JSX puro, necesitar√≠amos cargar Babel en el navegador.
            // Para asegurar que funcione, cargaremos Babel en el HTML arriba.
            
            return (
                React.createElement("div", { className: "min-h-screen font-sans text-slate-800 p-4 md:p-8 bg-gradient-to-b from-orange-900 via-red-950 to-black relative overflow-hidden" },
                    // Fondo Decorativo
                    React.createElement("div", { className: "absolute top-0 left-0 w-full h-full pointer-events-none opacity-20" },
                        React.createElement("div", { className: "absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-orange-600 rounded-full blur-[120px]" }),
                        React.createElement("div", { className: "absolute top-[-10%] right-[-10%] w-[50%] h-[50%] bg-red-600 rounded-full blur-[120px]" })
                    ),
                    React.createElement("div", { className: "max-w-6xl mx-auto relative z-10" },
                        // Header
                        React.createElement("header", { className: "mb-8 text-center" },
                            React.createElement("h1", { className: "text-4xl font-extrabold text-orange-500 mb-2 flex items-center justify-center gap-3 drop-shadow-md flex-wrap" },
                                React.createElement(Flame, { className: "w-10 h-10 text-orange-600 fill-orange-500 animate-pulse" }),
                                React.createElement("span", { className: "bg-clip-text text-transparent bg-gradient-to-r from-orange-400 to-red-600" }, "IMPERIO INFERNAL"),
                                React.createElement(Flame, { className: "w-10 h-10 text-orange-600 fill-orange-500 animate-pulse" })
                            ),
                            React.createElement("p", { className: "text-red-200/80 italic" }, "\"Sistema de Carga de Tributos Diarios\"")
                        ),
                        // Resumen Superior - EL JEFE
                        React.createElement("div", { className: "flex justify-center mb-16 relative" },
                            React.createElement("div", { className: "bg-gradient-to-br from-gray-900 to-red-950 border-4 border-red-700 rounded-2xl shadow-[0_0_30px_rgba(220,38,38,0.5)] p-6 w-full max-w-lg relative" },
                                React.createElement("div", { className: "absolute -top-6 -left-4 text-6xl rotate-[-20deg]" }, "üòà"),
                                React.createElement("div", { className: "absolute -top-6 -right-4 text-6xl rotate-[20deg] transform scale-x-[-1]" }, "üòà"),
                                React.createElement("div", { className: "flex flex-col md:flex-row items-center justify-between mb-4 border-b border-red-800 pb-4 gap-4" },
                                    React.createElement("div", { className: "flex items-center gap-3" },
                                        React.createElement("div", { className: "bg-red-900/50 p-3 rounded-full border border-red-600 shrink-0" },
                                            React.createElement("span", { className: "text-4xl" }, "üî±")
                                        ),
                                        React.createElement("div", null,
                                            React.createElement("h2", { className: "text-2xl font-bold text-red-100" }, "EL DIABLO"),
                                            React.createElement("span", { className: "text-xs text-orange-400 uppercase tracking-wider font-semibold" }, "Tributo Acumulado")
                                        )
                                    ),
                                    React.createElement("div", { className: "text-center md:text-right w-full md:w-auto overflow-hidden" },
                                        React.createElement("div", { className: "text-2xl md:text-3xl font-extrabold text-orange-500 drop-shadow-sm truncate", title: formatMoney(totalBossEarnings) }, formatMoney(totalBossEarnings)),
                                        React.createElement("div", { className: "text-sm text-red-300" }, "total en caja")
                                    )
                                ),
                                React.createElement("div", { className: "space-y-4 bg-black/40 p-4 rounded-xl border border-red-900/50" },
                                    React.createElement("div", null,
                                        React.createElement("div", { className: "flex justify-between items-center mb-3" },
                                            React.createElement("label", { className: "block text-sm font-medium text-red-200" }, "Historial de Ingresos"),
                                            React.createElement("button", {
                                                onClick: () => setActiveModal({ type: 'boss', id: null }),
                                                className: "bg-orange-700 hover:bg-orange-600 text-white text-xs px-3 py-1.5 rounded-lg font-bold transition-colors flex items-center gap-1 shadow-md border border-orange-500"
                                            }, React.createElement(Plus, { className: "w-4 h-4" }), " Cargar")
                                        ),
                                        React.createElement("div", { className: "max-h-40 overflow-y-auto pr-1 space-y-1 custom-scrollbar" },
                                            bossEntries.length === 0 && React.createElement("div", { className: "text-center py-4 border border-dashed border-red-900/50 rounded bg-red-950/20" },
                                                React.createElement("p", { className: "text-xs text-red-500/50" }, "Sin registros cargados a√∫n.")
                                            ),
                                            bossEntries.map(entry => React.createElement("div", { key: entry.id, className: "flex justify-between items-center bg-red-900/20 px-3 py-2 rounded border border-red-900/30 text-sm group hover:bg-red-900/30 transition-colors" },
                                                React.createElement("div", { className: "flex flex-col overflow-hidden mr-2" },
                                                    React.createElement("span", { className: "text-red-200 font-bold truncate" }, entry.label),
                                                    entry.details && React.createElement("span", { className: "text-[10px] text-red-400 opacity-70" }, "Detallada")
                                                ),
                                                React.createElement("div", { className: "flex items-center gap-2 shrink-0" },
                                                    React.createElement("span", { className: "text-orange-400 font-mono font-bold" }, formatMoney(entry.amount)),
                                                    React.createElement("button", { onClick: () => removeBossEntry(entry.id), className: "text-red-500 hover:text-red-300 opacity-0 group-hover:opacity-100 transition-opacity" },
                                                        React.createElement(Trash2, { className: "w-3.5 h-3.5" })
                                                    )
                                                )
                                            ))
                                        ),
                                        React.createElement("div", { className: "flex justify-between text-xs text-red-400 mt-3 pt-2 border-t border-red-900/50 gap-2" },
                                            React.createElement("span", { className: "truncate" }, `T√∫: ${formatMoney(bossTotalGenerated)}`),
                                            React.createElement("span", { className: "truncate" }, `√Ångeles: ${formatMoney(totalFromEmployees)}`)
                                        )
                                    )
                                ),
                                React.createElement("div", { className: "absolute -bottom-16 left-1/2 -translate-x-1/2 flex flex-col items-center z-[-1]" },
                                    React.createElement("div", { className: "h-16 w-2 bg-gradient-to-b from-red-600 to-yellow-400 shadow-[0_0_10px_rgba(255,165,0,0.8)]" })
                                )
                            )
                        ),
                        // Controles Empleados
                        React.createElement("div", { className: "flex justify-between items-center mb-6 max-w-6xl mx-auto px-4" },
                            React.createElement("h3", { className: "text-lg font-semibold flex items-center gap-2 text-orange-200" },
                                React.createElement(Cloud, { className: "w-5 h-5 text-sky-300" }),
                                `Legi√≥n Celestial (${employees.length})`
                            ),
                            React.createElement("button", {
                                onClick: addEmployee,
                                className: "flex items-center gap-2 bg-sky-600 hover:bg-sky-500 text-white px-5 py-2.5 rounded-full transition-all shadow-[0_0_15px_rgba(14,165,233,0.5)] font-bold border border-sky-400"
                            }, React.createElement(Plus, { className: "w-4 h-4" }), " Invocar √Ångel")
                        ),
                        // Grilla
                        React.createElement("div", { className: "relative pt-8 pb-12 min-h-[200px]" },
                            employees.length === 0 && React.createElement("div", { className: "text-center text-red-300/50 py-10 border-2 border-dashed border-red-900 rounded-xl bg-black/20" },
                                React.createElement("p", { className: "text-lg" }, "El infierno est√° vac√≠o..."),
                                React.createElement("p", { className: "text-sm" }, "Invoca √°ngeles para comenzar a cargar sus producciones.")
                            ),
                            employees.length > 1 && React.createElement("div", { className: "absolute top-0 left-4 right-4 h-8 border-t-2 border-l-2 border-r-2 border-yellow-500/50 rounded-t-3xl -z-0 shadow-[0_-5px_10px_rgba(255,215,0,0.2)]" }),
                            employees.length === 1 && React.createElement("div", { className: "absolute top-0 left-1/2 h-8 border-l-2 border-yellow-500/50 -z-0" }),
                            React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 relative z-10" },
                                employees.map(emp => {
                                    const totalGenerated = emp.entries.reduce((sum, e) => sum + e.amount, 0);
                                    const employeeKeeps = totalGenerated * (emp.retentionPercent / 100);
                                    const bossGets = totalGenerated - employeeKeeps;

                                    return React.createElement("div", { key: emp.id, className: `flex flex-col h-full relative bg-gradient-to-b from-white to-sky-50 rounded-xl p-5 border-2 transition-all hover:scale-[1.01] duration-300 ${emp.isWife ? 'border-pink-300 shadow-[0_0_20px_rgba(244,114,182,0.4)]' : 'border-sky-200 shadow-[0_0_20px_rgba(56,189,248,0.3)]'}` },
                                        React.createElement("div", { className: "absolute -top-3 left-1/2 -translate-x-1/2 w-16 h-4 border-4 border-yellow-400 rounded-[50%] opacity-80 shadow-[0_0_10px_rgba(255,215,0,0.8)] z-0" }),
                                        React.createElement("div", { className: "absolute -top-8 left-1/2 -translate-x-1/2 w-0.5 h-8 bg-gradient-to-t from-sky-300 to-yellow-400" }),
                                        // Header Tarjeta
                                        React.createElement("div", { className: "relative z-10 flex justify-between items-start mb-4" },
                                            React.createElement("div", { className: "flex-1" },
                                                React.createElement("div", { className: "flex items-center gap-2 mb-2" },
                                                    React.createElement("span", { className: "text-2xl" }, emp.isWife ? 'üíò' : 'üòá'),
                                                    React.createElement("input", {
                                                        type: "text",
                                                        value: emp.name,
                                                        onChange: (e) => updateEmployee(emp.id, 'name', e.target.value),
                                                        className: "font-bold text-lg text-slate-800 bg-transparent border-b border-transparent hover:border-sky-300 focus:border-sky-500 focus:outline-none w-full",
                                                        placeholder: "Nombre..."
                                                    })
                                                ),
                                                React.createElement("label", { className: `flex items-center gap-1 cursor-pointer select-none text-xs px-2 py-1 rounded transition-colors w-fit ${emp.isWife ? 'bg-pink-100 text-pink-600' : 'bg-sky-100 text-sky-600 hover:bg-sky-200'}` },
                                                    React.createElement("input", {
                                                        type: "checkbox",
                                                        checked: emp.isWife,
                                                        onChange: (e) => updateEmployee(emp.id, 'isWife', e.target.checked),
                                                        className: `rounded focus:ring-offset-0 ${emp.isWife ? 'text-pink-500 focus:ring-pink-500' : 'text-sky-500 focus:ring-sky-500'}`
                                                    }),
                                                    emp.isWife ? React.createElement("span", { className: "font-bold" }, "Esposa (100% para ti)") : React.createElement("span", null, "¬øEs tu Esposa?")
                                                )
                                            ),
                                            React.createElement("button", { onClick: () => removeEmployee(emp.id), className: "text-slate-300 hover:text-red-500 p-1" },
                                                React.createElement(Trash2, { className: "w-4 h-4" })
                                            )
                                        ),
                                        // Cuerpo
                                        React.createElement("div", { className: "flex-1 space-y-4 bg-white/50 rounded-lg p-2 mb-4" },
                                            React.createElement("button", {
                                                onClick: () => setActiveModal({ type: 'employee', id: emp.id }),
                                                className: "w-full bg-sky-100 hover:bg-sky-200 text-sky-700 py-2 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 border border-sky-200 text-sm"
                                            }, React.createElement(Calendar, { className: "w-4 h-4" }), " Cargar / Editar"),
                                            // Lista
                                            React.createElement("div", { className: "bg-sky-50/50 rounded border border-sky-100 h-32 overflow-y-auto p-1 custom-scrollbar" },
                                                emp.entries.length === 0 && React.createElement("div", { className: "h-full flex flex-col items-center justify-center text-sky-300 opacity-60" },
                                                    React.createElement(Plus, { className: "w-6 h-6 mb-1" }),
                                                    React.createElement("span", { className: "text-xs" }, "Sin cargas")
                                                ),
                                                emp.entries.map(entry => React.createElement("div", { key: entry.id, className: "flex justify-between items-center bg-white px-2 py-2 mb-1 rounded border border-sky-100 shadow-sm text-xs group" },
                                                    React.createElement("div", { className: "flex flex-col overflow-hidden max-w-[50%] " },
                                                        React.createElement("span", { className: "font-bold text-slate-700 truncate", title: entry.label }, entry.label),
                                                        entry.details && React.createElement("span", { className: "text-[9px] text-slate-400" }, "Detallada")
                                                    ),
                                                    React.createElement("div", { className: "flex items-center gap-1.5 flex-shrink-0" },
                                                        React.createElement("span", { className: "text-sky-700 font-mono font-bold" }, formatMoney(entry.amount)),
                                                        React.createElement("button", { onClick: () => removeEmployeeEntry(emp.id, entry.id), className: "text-red-300 hover:text-red-500 transition-colors" },
                                                            React.createElement(X, { className: "w-3 h-3" })
                                                        )
                                                    )
                                                ))
                                            ),
                                            // Porcentaje
                                            React.createElement("div", { className: "flex items-center justify-between border-t border-sky-100 pt-2" },
                                                React.createElement("label", { className: "text-xs font-bold text-sky-600 uppercase" }, "% Que se queda:"),
                                                React.createElement("div", { className: "relative w-20" },
                                                    React.createElement("input", {
                                                        type: "number",
                                                        min: "0",
                                                        max: "100",
                                                        value: emp.retentionPercent,
                                                        onChange: (e) => updateEmployee(emp.id, 'retentionPercent', Number(e.target.value)),
                                                        className: "w-full pl-2 pr-5 py-1 text-xs border border-sky-200 rounded text-right font-bold text-sky-800"
                                                    }),
                                                    React.createElement("span", { className: "absolute right-2 top-1/2 -translate-y-1/2 text-sky-400 text-xs" }, "%")
                                                )
                                            )
                                        ),
                                        // Footer Tarjeta
                                        React.createElement("div", { className: "mt-auto space-y-2" },
                                            React.createElement("div", { className: "flex justify-between text-xs text-slate-500 px-2" },
                                                React.createElement("span", null, "Generado Total:"),
                                                React.createElement("span", { className: "font-bold text-slate-700 truncate ml-2", title: formatMoney(totalGenerated) }, formatMoney(totalGenerated))
                                            ),
                                            React.createElement("div", { className: "flex justify-between text-xs text-slate-500 px-2" },
                                                React.createElement("span", null, "Gana Empleado:"),
                                                React.createElement("span", { className: "font-bold text-sky-600 truncate ml-2", title: formatMoney(employeeKeeps) }, formatMoney(employeeKeeps))
                                            ),
                                            React.createElement("div", { className: `mt-2 pt-3 border-t-2 border-dashed ${emp.isWife ? 'border-pink-200 bg-pink-50/30' : 'border-sky-200 bg-sky-50/30'} -mx-5 -mb-5 px-5 pb-5 rounded-b-xl` },
                                                React.createElement("div", { className: "flex items-center justify-between" },
                                                    React.createElement("div", { className: "flex items-center gap-2 text-xs text-slate-500 shrink-0" },
                                                        React.createElement("div", { className: "bg-orange-100 p-1.5 rounded-full animate-bounce" },
                                                            React.createElement(Flame, { className: "w-4 h-4 text-orange-600" })
                                                        ),
                                                        React.createElement("span", { className: "font-medium text-orange-800 hidden sm:inline" }, "Tributo:"),
                                                        React.createElement("span", { className: "font-medium text-orange-800 sm:hidden" }, "Para Ti:")
                                                    ),
                                                    React.createElement("div", { className: "text-lg md:text-xl font-black text-orange-600 drop-shadow-sm truncate", title: formatMoney(bossGets) }, formatMoney(bossGets))
                                                )
                                            )
                                        )
                                    );
                                })
                            )
                        ),
                        // Info Footer
                        React.createElement("div", { className: "mt-8 text-center text-sm text-red-900/40 font-serif italic" },
                            "* Los pactos se renuevan cada 30 d√≠as lunares."
                        )
                    ),
                    // Modal Render
                    React.createElement(EntryModal, {
                        isOpen: !!activeModal,
                        onClose: () => setActiveModal(null),
                        theme: activeModal?.type === 'boss' ? 'boss' : 'angel',
                        title: activeModal?.type === 'boss' ? 'Ingresos del Jefe' : 'Ingresos del √Ångel',
                        existingEntries: getActiveEntries(),
                        onSave: (data, isUpdate) => {
                            if (activeModal.type === 'boss') {
                                handleBossSave(data, isUpdate);
                            } else {
                                handleEmployeeSave(activeModal.id, data, isUpdate);
                            }
                        }
                    })
                )
            );
        };

        // 4. Montamos la aplicaci√≥n en el div "root"
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(EarningsCalculator));
    </script>
</body>
</html>
